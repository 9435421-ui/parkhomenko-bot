# üîç –ê–£–î–ò–¢ –°–ò–°–¢–ï–ú–´ TERION
**–î–∞—Ç–∞:** 17 —Ñ–µ–≤—Ä–∞–ª—è 2026  
**–í–µ—Ä—Å–∏—è:** –ü–æ—Å–ª–µ –∫–æ–º–º–∏—Ç–∞ 7088a20 (–§–∏–Ω–∞–ª–∏–∑–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã TERION)

---

## üìã –†–ï–ó–£–õ–¨–¢–ê–¢–´ –ê–£–î–ò–¢–ê –ü–û –ö–û–ú–ü–û–ù–ï–ù–¢–ê–ú

### 1. üîé –ê–£–î–ò–¢ –§–£–ù–ö–¶–ò–ò DISCOVERY

**–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è **BROKEN / DISABLED**

**–ù–∞–π–¥–µ–Ω–æ:**
- –ö–æ–º–∞–Ω–¥–∞ `/spy_discover` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ `handlers/admin.py` (—Å—Ç—Ä–æ–∫–∞ 962)
- –ö–æ–º–∞–Ω–¥–∞ –ø—ã—Ç–∞–µ—Ç—Å—è –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å `from services.lead_hunter import Discovery`
- **–ü–†–û–ë–õ–ï–ú–ê:** –ö–ª–∞—Å—Å `Discovery` –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ –ø—Ä–æ–µ–∫—Ç–µ
- –í `services/lead_hunter/hunter.py` (—Å—Ç—Ä–æ–∫–∞ 9) –µ—Å—Ç—å –∏–º–ø–æ—Ä—Ç `from .discovery import Discovery`
- –í `services/lead_hunter/hunter.py` (—Å—Ç—Ä–æ–∫–∞ 62) —Å–æ–∑–¥–∞–µ—Ç—Å—è —ç–∫–∑–µ–º–ø–ª—è—Ä `self.discovery = Discovery()`
- **–§–∞–π–ª `services/lead_hunter/discovery.py` –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç**

**–ö–∞–∫ –¥–æ–ª–∂–Ω–∞ —Ä–∞–±–æ—Ç–∞—Ç—å (–ø–æ BRIEF):**
- –ü–æ–∏—Å–∫ –Ω–æ–≤—ã—Ö —á–∞—Ç–æ–≤/–≥—Ä—É–ø–ø —á–µ—Ä–µ–∑ –≥–ª–æ–±–∞–ª—å–Ω—ã–π –ø–æ–∏—Å–∫ Telegram
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤ –¥–ª—è –ø–æ–∏—Å–∫–∞
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤ –≤ –ë–î

**–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:**
- –ö–æ–º–∞–Ω–¥–∞ `/spy_discover` –≤—ã–∑–æ–≤–µ—Ç –æ—à–∏–±–∫—É `ImportError: cannot import name 'Discovery'`
- Discovery —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª **–ù–ï –†–ê–ë–û–¢–ê–ï–¢**

---

### 2. üïµÔ∏è –ê–£–î–ò–¢ –®–ü–ò–û–ù–ê (SCOUT PARSER)

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **READY** (—á–∞—Å—Ç–∏—á–Ω–æ)

**–ù–∞–π–¥–µ–Ω–æ:**

#### 2.1. –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ª–∏–¥–æ–≤
- **–§–∞–π–ª:** `services/scout_parser.py`
- **–ú–µ—Ç–æ–¥:** `detect_lead()` (—Å—Ç—Ä–æ–∫–∞ 146)
- **6 —É—Ä–æ–≤–Ω–µ–π —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –∞–Ω—Ç–∏-—Å–ø–∞–º–∞:**
  1. ‚úÖ –ò—Å–∫–ª—é—á–µ–Ω–∏–µ –∫–∞–Ω–∞–ª–æ–≤ (`sender_type == "channel"`)
  2. ‚úÖ –°—Ç–æ–ø-—Å–ª–æ–≤–∞ (`STOP_KEYWORDS`)
  3. ‚úÖ –ß–µ—Ä–Ω—ã–π —Å–ø–∏—Å–æ–∫ —Ä–µ–∫–ª–∞–º–Ω—ã—Ö —Ñ—Ä–∞–∑ (`AD_STOP_WORDS`)
  4. ‚úÖ –î–µ—Ç–µ–∫—Ç–æ—Ä —Å—Å—ã–ª–æ–∫ (>2 —Å—Å—ã–ª–æ–∫ –∏–ª–∏ —Å—Å—ã–ª–∫–∞ –Ω–∞ –¥—Ä—É–≥–æ–π –∫–∞–Ω–∞–ª)
  5. ‚úÖ –§–æ–∫—É—Å –Ω–∞ –∑–∞–ø—Ä–æ—Å (–≤–æ–ø—Ä–æ—Å—ã –∏–ª–∏ –º–∞—Ä–∫–µ—Ä—ã –±–æ–ª–∏)
  6. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å—Ç–æ—Ä–∏–∏ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤ (48 —á–∞—Å–æ–≤) ‚Äî —á–µ—Ä–µ–∑ `_detect_lead_async()`

#### 2.2. –ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –¥–ª—è —Ç—Ä–∏–≥–≥–µ—Ä–∞ "–ì–æ—Ä—è—á–∏–π –ª–∏–¥"

**–ì–æ—Ä—è—á–∏–µ —Ç—Ä–∏–≥–≥–µ—Ä—ã (`HOT_TRIGGERS`):**
```python
HOT_TRIGGERS = [
    r"–ø—Ä–µ–¥–ø–∏—Å–∞–Ω–∏–µ\s+–ú–ñ–ò",
    r"—à—Ç—Ä–∞—Ñ\s+–∑–∞\s+–ø–µ—Ä–µ–ø–ª–∞–Ω–∏—Ä–æ–≤–∫—É",
    r"–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞\s+—Å–¥–µ–ª–∫–∏",
    r"—É–∑–∞–∫–æ–Ω–∏—Ç—å\s+–ø–µ—Ä–µ–ø–ª–∞–Ω–∏—Ä–æ–≤–∫—É",
    r"–∏–Ω—Å–ø–µ–∫—Ç–æ—Ä\s+–ú–ñ–ò",
    r"—Å–æ–≥–ª–∞—Å–æ–≤–∞—Ç—å\s+–ø–µ—Ä–µ–ø–ª–∞–Ω–∏—Ä–æ–≤–∫—É",
    r"–ø—Ä–æ–µ–∫—Ç\s+–ø–µ—Ä–µ–ø–ª–∞–Ω–∏—Ä–æ–≤–∫–∏",
    r"–∑–∞–∫–∞–∑–∞—Ç—å\s+–ø—Ä–æ–µ–∫—Ç",
    r"–Ω—É–∂–µ–Ω\s+–ø—Ä–æ–µ–∫—Ç",
    r"–∫—Ç–æ\s+—Å–æ–≥–ª–∞—Å–æ–≤—ã–≤–∞–ª"
]
```

**–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ç–µ—Ä–º–∏–Ω—ã (`TECHNICAL_TERMS`):**
```python
TECHNICAL_TERMS = [
    r"–ø–µ—Ä–µ–ø–ª–∞–Ω–∏—Ä–æ–≤",
    r"—Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏",
    r"—É–∑–∞–∫–æ–Ω–∏",
    r"–º–∂–∏",
    r"–±—Ç–∏",
    r"–∞–∫—Ç\s+—Å–∫—Ä—ã—Ç—ã—Ö",
    r"–ø—Ä–µ–¥–ø–∏—Å–∞–Ω–∏–µ\s+–ú–ñ–ò",
    r"—à—Ç—Ä–∞—Ñ\s+–∑–∞\s+–ø–µ—Ä–µ–ø–ª–∞–Ω–∏—Ä–æ–≤–∫—É",
    r"–∞–∫—Ç\s+—Å–∫—Ä—ã—Ç—ã—Ö\s+—Ä–∞–±–æ—Ç",
    r"–ø—Ä–æ–µ–∫—Ç\s+–°–†–û",
    r"—Å–æ–≥–ª–∞—Å–∏–µ\s+—Å–æ—Å–µ–¥–µ–π",
    r"–º–æ–∫—Ä–∞—è\s+–∑–æ–Ω–∞",
    r"—Å–Ω–æ—Å\s+(—Å—Ç–µ–Ω|–ø–æ–¥–æ–∫–æ–Ω–Ω|–±–ª–æ–∫–∞)",
    r"–æ–±—ä–µ–¥–∏–Ω–µ–Ω",
    r"–Ω–µ–∂–∏–ª–æ–µ\s+–ø–æ–º–µ—â–µ–Ω",
    r"–ø—Ä–æ–µ–∫—Ç\s+–ø–µ—Ä–µ–ø–ª–∞–Ω–∏—Ä–æ–≤–∫–∏",
    r"–ø–ª–∞–Ω\s+(–∫–≤–∞—Ä—Ç–∏—Ä|–ø–æ–º–µ—â–µ–Ω)"
]
```

**–ö–æ–º–º–µ—Ä—á–µ—Å–∫–∏–µ –º–∞—Ä–∫–µ—Ä—ã (`COMMERCIAL_MARKERS`):**
```python
COMMERCIAL_MARKERS = [
    r"—Å—Ç–æ–∏–º–æ—Å—Ç—å",
    r"—Å–∫–æ–ª—å–∫–æ\s+—Å—Ç–æ–∏—Ç",
    r"—Ü–µ–Ω–∞",
    r"–Ω—É–∂–µ–Ω\s+–ø—Ä–æ–µ–∫—Ç",
    r"–ø–æ–º–æ–≥–∏—Ç–µ",
    r"—Å—Ä–æ–∫–∏",
    r"–∫—Ç–æ\s+–¥–µ–ª–∞–ª",
    r"–∫\s+–∫–æ–º—É\s+–æ–±—Ä–∞—Ç–∏—Ç—å—Å—è",
    r"–ø—Ä–µ–¥–ø–∏—Å–∞–Ω–∏–µ",
    r"–∏–Ω—Å–ø–µ–∫—Ç–æ—Ä",
    r"–∑–∞–∫–∞–∑–∞—Ç—å\s+–ø—Ä–æ–µ–∫—Ç",
    r"–æ—Ñ–æ—Ä–º–∏—Ç—å\s+–ø–µ—Ä–µ–ø–ª–∞–Ω–∏—Ä–æ–≤–∫—É",
    r"—Å–æ–≥–ª–∞—Å–æ–≤–∞–ª\w*",
    r"—É–∑–∞–∫–æ–Ω–∏–ª\w*"
]
```

**–ü–∞—Ç—Ç–µ—Ä–Ω—ã –≤–æ–ø—Ä–æ—Å–æ–≤ (`QUESTION_PATTERNS`):**
```python
QUESTION_PATTERNS = [
    r"–∫—Ç–æ\s+–¥–µ–ª–∞–ª",
    r"–∫–∞–∫\s+—Å–æ–≥–ª–∞—Å–æ–≤–∞—Ç—å",
    r"–ø–æ–¥—Å–∫–∞–∂–∏—Ç–µ",
    r"\?\s*$",
    r"–∫—Ç–æ\s+(—Å–æ–≥–ª–∞—Å–æ–≤—ã–≤–∞–ª|–æ—Ñ–æ—Ä–º–ª—è–ª|–¥–µ–ª–∞–ª|–∑–∞–∫–∞–∑—ã–≤–∞–ª)",
    r"–∫–∞–∫\s+(—Å–æ–≥–ª–∞—Å–æ–≤–∞—Ç—å|—É–∑–∞–∫–æ–Ω–∏—Ç—å|–æ—Ñ–æ—Ä–º–∏—Ç—å|—Å–¥–µ–ª–∞—Ç—å)",
    # ... –∏ –¥—Ä—É–≥–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã
]
```

**–õ–æ–≥–∏–∫–∞ –¥–µ—Ç–µ–∫—Ü–∏–∏:**
- ‚úÖ –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ —Ä–∞–±–æ—Ç–∞—é—Ç –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ñ–ö
- ‚úÖ –î–ª—è Telegram: —Ç—Ä–µ–±—É–µ—Ç—Å—è –∫–æ–º–±–∏–Ω–∞—Ü–∏—è (—Ç–µ—Ö.—Ç–µ—Ä–º–∏–Ω + –≤–æ–ø—Ä–æ—Å –ò–õ–ò —Ç–µ—Ö.—Ç–µ—Ä–º–∏–Ω + –∫–æ–º–º–µ—Ä—á.–º–∞—Ä–∫–µ—Ä)
- ‚úÖ –î–ª—è VK: –±–æ–ª–µ–µ –º—è–≥–∫–∞—è –ª–æ–≥–∏–∫–∞ (—Ç–µ—Ö.—Ç–µ—Ä–º–∏–Ω –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ)
- ‚úÖ –ì–æ—Ä—è—á–∏–µ —Ç—Ä–∏–≥–≥–µ—Ä—ã ‚Äî –±–µ–∑—É—Å–ª–æ–≤–Ω—ã–π –ª–∏–¥ (–±–µ–∑ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫)

**–ü—Ä–æ–±–ª–µ–º—ã:**
- ‚ö†Ô∏è Discovery –∫–ª–∞—Å—Å –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç, –Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ `hunter.py`

---

### 3. üì∞ –ê–£–î–ò–¢ –ö–û–ù–¢–ï–ù–¢–ê

**–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è **DISABLED** (—Ç—Ä–µ–±—É–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–∞–Ω–Ω—ã—Ö)

**–ù–∞–π–¥–µ–Ω–æ:**

#### 3.1. –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –ø—É–±–ª–∏–∫–∞—Ü–∏–π
- **–§–∞–π–ª:** `main.py` (—Å—Ç—Ä–æ–∫–∏ 150-172)
- **–§—É–Ω–∫—Ü–∏—è:** `check_and_publish_scheduled_posts()`
- **–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ:**
  - –ö–∞–∂–¥—ã–π —á–∞—Å (`interval`, hours=1)
  - –Ø–≤–Ω–æ –≤ 12:00 (`cron`, hour=12, minute=0)

#### 3.2. –õ–æ–≥–∏–∫–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏
- **–ú–µ—Ç–æ–¥ –ë–î:** `db.get_posts_to_publish()` (—Å—Ç—Ä–æ–∫–∞ 848 –≤ `database/db.py`)
- **–£—Å–ª–æ–≤–∏—è –ø—É–±–ª–∏–∫–∞—Ü–∏–∏:**
  ```sql
  SELECT * FROM content_plan 
  WHERE status = 'approved' 
  AND publish_date <= NOW() 
  ORDER BY publish_date ASC
  ```

#### 3.3. –ü—Ä–æ–±–ª–µ–º—ã
- ‚ö†Ô∏è **TODO –≤ –∫–æ–¥–µ:** `image_bytes = None  # TODO: –∑–∞–≥—Ä—É–∑–∫–∞ –ø–æ image_url –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏` (—Å—Ç—Ä–æ–∫–∞ 161 –≤ `main.py`)
- ‚ö†Ô∏è –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –Ω–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- ‚ö†Ô∏è –ù—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, –µ—Å—Ç—å –ª–∏ –ø–æ—Å—Ç—ã —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º `approved` –≤ –ë–î
- ‚ö†Ô∏è –ù—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ª–∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è `publish_date`

**–ü–æ—á–µ–º—É –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –º–æ–≥—É—Ç –Ω–µ –≤—ã—Ö–æ–¥–∏—Ç—å:**
1. –ù–µ—Ç –ø–æ—Å—Ç–æ–≤ —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º `approved` –≤ —Ç–∞–±–ª–∏—Ü–µ `content_plan`
2. `publish_date` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ –±—É–¥—É—â–µ–µ
3. –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –Ω–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è (–Ω–æ —ç—Ç–æ –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç –ø—É–±–ª–∏–∫–∞—Ü–∏—é —Ç–µ–∫—Å—Ç–∞)

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ë–î –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –ø–æ—Å—Ç–æ–≤ —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º `approved` –∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å `publish_date`

---

### 4. ü§ñ –ò–ù–í–ï–ù–¢–ê–†–ò–ó–ê–¶–ò–Ø –ê–ì–ï–ù–¢–û–í

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **READY** (3-—Ö —Å—Ç—É–ø–µ–Ω—á–∞—Ç—ã–π Fallback —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω)

#### 4.1. –ê–≥–µ–Ω—Ç-–ü—Ä–æ–¥–∞–≤–µ—Ü (`_generate_sales_reply`)

**–§–∞–π–ª:** `services/lead_hunter/hunter.py` (—Å—Ç—Ä–æ–∫–∞ 212)

**Fallback —Ü–µ–ø–æ—á–∫–∞:**
1. ‚úÖ **Yandex API –∫–ª—é—á 1** (–æ—Å–Ω–æ–≤–Ω–æ–π) ‚Äî —Å—Ç—Ä–æ–∫–∏ 316-327
2. ‚úÖ **Yandex API –∫–ª—é—á 2** (—Ä–µ–∑–µ—Ä–≤–Ω—ã–π, `YANDEX_API_KEY_BACKUP`) ‚Äî —Å—Ç—Ä–æ–∫–∏ 332-357
3. ‚úÖ **Router AI** ‚Äî —Å—Ç—Ä–æ–∫–∏ 363-376
4. ‚úÖ **–°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —à–∞–±–ª–æ–Ω—ã** –ø–æ —Å—Ç–∞–¥–∏–∏ –±–æ–ª–∏ ‚Äî —Å—Ç—Ä–æ–∫–∏ 378-403

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—à–∏–±–æ–∫ –æ—Ç Yandex GPT (—Å—Ç—Ä–æ–∫–∏ 324-327)
- ‚úÖ –í—Ä–µ–º–µ–Ω–Ω–∞—è –∑–∞–º–µ–Ω–∞ –∫–ª—é—á–∞ –¥–ª—è —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ (—Å—Ç—Ä–æ–∫–∏ 337-355)
- ‚úÖ Fallback –Ω–∞ Router AI –ø—Ä–∏ –æ—à–∏–±–∫–µ –≤—Å–µ—Ö –∫–ª—é—á–µ–π –Ø–Ω–¥–µ–∫—Å–∞
- ‚úÖ –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —à–∞–±–ª–æ–Ω—ã –∫–∞–∫ –ø–æ—Å–ª–µ–¥–Ω–∏–π fallback

#### 4.2. Yandex GPT Client

**–§–∞–π–ª:** `utils/yandex_gpt.py`

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
- ‚úÖ –ö–ª–∞—Å—Å `YandexGPTClient` –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ä–µ–∑–µ—Ä–≤–Ω—ã–π –∫–ª—é—á (—Å—Ç—Ä–æ–∫–∞ 14)
- ‚úÖ –ú–µ—Ç–æ–¥ `generate_response()` –ø—Ä–æ–±—É–µ—Ç –æ–±–∞ –∫–ª—é—á–∞ (—Å—Ç—Ä–æ–∫–∏ 51-53, 79-106)
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –∫–ª—é—á–∞ (—Å—Ç—Ä–æ–∫–∞ 96)

#### 4.3. –ê–Ω–∞–ª–∏–∑ –∏–Ω—Ç–µ–Ω—Ç–∞ (`_analyze_intent`)

**–§–∞–π–ª:** `services/lead_hunter/hunter.py` (—Å—Ç—Ä–æ–∫–∞ 405)

**Fallback:**
- ‚úÖ Yandex GPT (–æ—Å–Ω–æ–≤–Ω–æ–π) ‚Äî —Å—Ç—Ä–æ–∫–∞ 468
- ‚ö†Ô∏è –ü—Ä–æ—Å—Ç–∞—è —ç–≤—Ä–∏—Å—Ç–∏–∫–∞ –ø—Ä–∏ `USE_YANDEX_AGENT=false` ‚Äî —Å—Ç—Ä–æ–∫–∏ 459-464
- ‚ùå **–ù–ï–¢** —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –∫–ª—é—á–∞ –Ø–Ω–¥–µ–∫—Å–∞ –≤ —ç—Ç–æ–º –º–µ—Ç–æ–¥–µ
- ‚ùå **–ù–ï–¢** Router AI fallback –≤ —ç—Ç–æ–º –º–µ—Ç–æ–¥–µ

**–ü—Ä–æ–±–ª–µ–º–∞:** –ú–µ—Ç–æ–¥ `_analyze_intent()` –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–æ–ª–Ω—ã–π 3-—Ö —Å—Ç—É–ø–µ–Ω—á–∞—Ç—ã–π fallback, —Ç–æ–ª—å–∫–æ –æ—Å–Ω–æ–≤–Ω–æ–π Yandex GPT –∏–ª–∏ —ç–≤—Ä–∏—Å—Ç–∏–∫—É.

---

## üìä –ò–¢–û–ì–û–í–´–ô –°–ü–ò–°–û–ö

### ‚úÖ –ß–¢–û –†–ê–ë–û–¢–ê–ï–¢ (Ready)

1. **Scout Parser:**
   - ‚úÖ –§–∏–ª—å—Ç—Ä—ã –∞–Ω—Ç–∏-—Å–ø–∞–º–∞ (6 —É—Ä–æ–≤–Ω–µ–π)
   - ‚úÖ –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ (–Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç –ñ–ö)
   - ‚úÖ –ì–æ—Ä—è—á–∏–µ —Ç—Ä–∏–≥–≥–µ—Ä—ã –¥–ª—è –¥–µ—Ç–µ–∫—Ü–∏–∏ –ª–∏–¥–æ–≤
   - ‚úÖ –ò–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω—ã–π –ø–∞—Ä—Å–∏–Ω–≥ —á–µ—Ä–µ–∑ `last_post_id`
   - ‚úÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ (TG/VK)
   - ‚úÖ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã–µ –ñ–ö

2. **LeadHunter:**
   - ‚úÖ –†–µ–∂–∏–º –º–æ–¥–µ—Ä–∞—Ü–∏–∏ (–∫–∞—Ä—Ç–æ—á–∫–∏ –≤ –∞–¥–º–∏–Ω-–∫–∞–Ω–∞–ª)
   - ‚úÖ –§–∏–ª—å—Ç—Ä "–ñ–∏–≤–æ–π —á–µ–ª–æ–≤–µ–∫" –≤ –º–µ—Ç–æ–¥–∞—Ö –ë–î
   - ‚úÖ –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ —Å–≤–æ–¥–æ–∫ (9:00/14:00/19:00 –ú–°–ö)
   - ‚úÖ –ù–µ–º–µ–¥–ª–µ–Ω–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ –≥–æ—Ä—è—á–∏—Ö –ª–∏–¥–æ–≤

3. **–ê–≥–µ–Ω—Ç-–ü—Ä–æ–¥–∞–≤–µ—Ü (`_generate_sales_reply`):**
   - ‚úÖ 3-—Ö —Å—Ç—É–ø–µ–Ω—á–∞—Ç—ã–π Fallback (Yandex 1 ‚Üí Yandex 2 ‚Üí Router AI ‚Üí –®–∞–±–ª–æ–Ω—ã)
   - ‚úÖ –£—á–µ—Ç –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã (TG/VK)
   - ‚úÖ –£—á–µ—Ç –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞ –ñ–ö

4. **Yandex GPT Client:**
   - ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –∫–ª—é—á–∞
   - ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π fallback –Ω–∞ —Ä–µ–∑–µ—Ä–≤–Ω—ã–π –∫–ª—é—á

5. **–ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∫–æ–Ω—Ç–µ–Ω—Ç–∞:**
   - ‚úÖ –ó–∞–¥–∞—á–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ (–∫–∞–∂–¥—ã–π —á–∞—Å + 12:00)
   - ‚úÖ –ú–µ—Ç–æ–¥ –ë–î –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ—Å—Ç–æ–≤ –≥–æ—Ç–æ–≤

---

### ‚ö†Ô∏è –ß–¢–û –ï–°–¢–¨ –í –ö–û–î–ï, –ù–û –í–´–ö–õ–Æ–ß–ï–ù–û / –¢–†–ï–ë–£–ï–¢ –ü–†–û–í–ï–†–ö–ò (Disabled)

1. **Discovery —Ñ—É–Ω–∫—Ü–∏—è:**
   - ‚ö†Ô∏è –ö–æ–º–∞–Ω–¥–∞ `/spy_discover` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
   - ‚ö†Ô∏è –ö–ª–∞—Å—Å `Discovery` –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç (—Ñ–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω)
   - ‚ö†Ô∏è –ò–º–ø–æ—Ä—Ç –≤ `hunter.py` –≤—ã–∑–æ–≤–µ—Ç –æ—à–∏–±–∫—É
   - **–°—Ç–∞—Ç—É—Å:** BROKEN (–Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –Ω–æ –∫–æ–¥ –µ—Å—Ç—å)

2. **–ö–æ–Ω—Ç–µ–Ω—Ç-–ø—É–±–ª–∏–∫–∞—Ü–∏—è:**
   - ‚ö†Ô∏è –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –Ω–∞—Å—Ç—Ä–æ–µ–Ω
   - ‚ö†Ô∏è –ú–µ—Ç–æ–¥ –ë–î –≥–æ—Ç–æ–≤
   - ‚ö†Ô∏è **–¢—Ä–µ–±—É–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏:** –µ—Å—Ç—å –ª–∏ –ø–æ—Å—Ç—ã —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º `approved` –≤ –ë–î
   - ‚ö†Ô∏è **TODO:** –∑–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞

3. **–ê–Ω–∞–ª–∏–∑ –∏–Ω—Ç–µ–Ω—Ç–∞ (`_analyze_intent`):**
   - ‚ö†Ô∏è –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–æ–ª—å–∫–æ –æ—Å–Ω–æ–≤–Ω–æ–π Yandex GPT
   - ‚ö†Ô∏è –ù–ï–¢ —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –∫–ª—é—á–∞ –Ø–Ω–¥–µ–∫—Å–∞
   - ‚ö†Ô∏è –ù–ï–¢ Router AI fallback
   - **–°—Ç–∞—Ç—É—Å:** –ß–∞—Å—Ç–∏—á–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç (—Ç–æ–ª—å–∫–æ –æ—Å–Ω–æ–≤–Ω–æ–π –∫–ª—é—á)

---

### ‚ùå –ß–¢–û –°–õ–û–ú–ê–ù–û (Broken)

1. **Discovery –∫–ª–∞—Å—Å:**
   - ‚ùå –§–∞–π–ª `services/lead_hunter/discovery.py` –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç
   - ‚ùå –ö–æ–º–∞–Ω–¥–∞ `/spy_discover` –≤—ã–∑–æ–≤–µ—Ç `ImportError`
   - ‚ùå `hunter.py` –Ω–µ –º–æ–∂–µ—Ç —Å–æ–∑–¥–∞—Ç—å —ç–∫–∑–µ–º–ø–ª—è—Ä `Discovery()`
   - **–í–ª–∏—è–Ω–∏–µ:** Discovery —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

2. **–ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –≤ –∫–æ–Ω—Ç–µ–Ω—Ç-–ø—É–±–ª–∏–∫–∞—Ü–∏–∏:**
   - ‚ùå TODO –≤ –∫–æ–¥–µ: `image_bytes = None  # TODO: –∑–∞–≥—Ä—É–∑–∫–∞ –ø–æ image_url –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏`
   - ‚ùå –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –Ω–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
   - **–í–ª–∏—è–Ω–∏–µ:** –ü–æ—Å—Ç—ã –ø—É–±–ª–∏–∫—É—é—Ç—Å—è –±–µ–∑ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

---

## üîß –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò –ü–û –ò–°–ü–†–ê–í–õ–ï–ù–ò–Æ

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1 (–ö—Ä–∏—Ç–∏—á–Ω–æ)

1. **–°–æ–∑–¥–∞—Ç—å –∫–ª–∞—Å—Å Discovery:**
   - –°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª `services/lead_hunter/discovery.py`
   - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –º–µ—Ç–æ–¥ `find_new_sources()` –¥–ª—è –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞ Telegram
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –∏–∑ `scout_parser.py` –∏–ª–∏ –ë–î

2. **–î–æ–±–∞–≤–∏—Ç—å fallback –≤ `_analyze_intent`:**
   - –î–æ–±–∞–≤–∏—Ç—å —Ä–µ–∑–µ—Ä–≤–Ω—ã–π –∫–ª—é—á –Ø–Ω–¥–µ–∫—Å–∞
   - –î–æ–±–∞–≤–∏—Ç—å Router AI fallback
   - –ü—Ä–∏–≤–µ—Å—Ç–∏ –∫ —Ç–æ–º—É –∂–µ —É—Ä–æ–≤–Ω—é –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏, —á—Ç–æ –∏ `_generate_sales_reply`

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2 (–í–∞–∂–Ω–æ)

3. **–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∑–∞–≥—Ä—É–∑–∫—É –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π:**
   - –î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏–∫—É –∑–∞–≥—Ä—É–∑–∫–∏ `image_url` –≤ `check_and_publish_scheduled_posts()`
   - –û–±—Ä–∞–±–æ—Ç–∞—Ç—å –∫–∞–∫ HTTP URL, —Ç–∞–∫ –∏ Telegram `file_id`

4. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Ç–µ–Ω—Ç-–ø–ª–∞–Ω:**
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ –ø–æ—Å—Ç–æ–≤ —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º `approved`
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å `publish_date`
   - –î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –ø–æ—Å—Ç–æ–≤ –¥–ª—è –ø—É–±–ª–∏–∫–∞—Ü–∏–∏

---

## üìù –ü–†–ò–ú–ï–ß–ê–ù–ò–Ø

- –í—Å–µ –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –∏ —Ñ–∏–ª—å—Ç—Ä—ã —Ä–∞–±–æ—Ç–∞—é—Ç **–≥–ª–æ–±–∞–ª—å–Ω–æ**, –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ñ–ö
- –§–∏–ª—å—Ç—Ä—ã –∞–Ω—Ç–∏-—Å–ø–∞–º–∞ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è **–¥–æ** –æ—Ç–ø—Ä–∞–≤–∫–∏ –≤ AI (—ç–∫–æ–Ω–æ–º–∏—è —Ç–æ–∫–µ–Ω–æ–≤)
- –†–µ–∂–∏–º –º–æ–¥–µ—Ä–∞—Ü–∏–∏ –∞–∫—Ç–∏–≤–µ–Ω: –≤—Å–µ –ª–∏–¥—ã –∏–¥—É—Ç –≤ –∞–¥–º–∏–Ω-–∫–∞–Ω–∞–ª (—Ç–æ–ø–∏–∫ `THREAD_ID_HOT_LEADS`)
- –§–∏–ª—å—Ç—Ä "–ñ–∏–≤–æ–π —á–µ–ª–æ–≤–µ–∫" —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –º–µ—Ç–æ–¥–∞—Ö –ë–î –¥–ª—è —Å–≤–æ–¥–æ–∫

---

**–ê—É–¥–∏—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω:** 17.02.2026  
**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –û–∂–∏–¥–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã –Ω–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
